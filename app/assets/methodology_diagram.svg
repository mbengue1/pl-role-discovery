<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="400"
    xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="800" height="400" fill="#f8f9fa" />

    <!-- Title -->
    <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333333" text-anchor="middle">
    Player Role Discovery Methodology
    </text>

    <!-- Step 1: Data Collection -->
    <rect x="50" y="80" width="120" height="60" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" />
    <text x="110" y="115" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Data Collection
    </text>

    <!-- Step 2: Feature Engineering -->
    <rect x="200" y="80" width="120" height="60" rx="5" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" />
    <text x="260" y="115" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Feature Engineering
    </text>

    <!-- Step 3: Dimensionality Reduction -->
    <rect x="350" y="80" width="120" height="60" rx="5" fill="#fff3e0" stroke="#f57c00" stroke-width="2" />
    <text x="410" y="108" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Dimensionality
    </text>
    <text x="410" y="126" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Reduction
    </text>

    <!-- Step 4: Clustering -->
    <rect x="500" y="80" width="120" height="60" rx="5" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" />
    <text x="560" y="115" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Clustering
    </text>

    <!-- Step 5: Explainability -->
    <rect x="650" y="80" width="120" height="60" rx="5" fill="#ffebee" stroke="#c62828" stroke-width="2" />
    <text x="710" y="115" font-family="Arial, sans-serif" font-size="14" fill="#333333" text-anchor="middle">
    Explainability
    </text>

    <!-- Arrows -->
    <line x1="170" y1="110" x2="200" y2="110" stroke="#666666" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="320" y1="110" x2="350" y2="110" stroke="#666666" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="470" y1="110" x2="500" y2="110" stroke="#666666" stroke-width="2" marker-end="url(#arrowhead)" />
    <line x1="620" y1="110" x2="650" y2="110" stroke="#666666" stroke-width="2" marker-end="url(#arrowhead)" />

    <!-- Arrow definition -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#666666" />
        </marker>
    </defs>

    <!-- Details -->
    <!-- Data Collection -->
    <rect x="50" y="160" width="120" height="200" rx="5" fill="#e3f2fd" fill-opacity="0.5" stroke="#1976d2" stroke-width="1" />
    <text x="110" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976d2" text-anchor="middle">
    Data Collection
    </text>
    <text x="110" y="205" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    FBref 2024/25
    </text>
    <text x="110" y="225" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Premier League
    </text>
    <text x="110" y="245" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    563 players
    </text>
    <text x="110" y="265" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    â‰¥600 minutes
    </text>
    <text x="110" y="285" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    266 features
    </text>

    <!-- Feature Engineering -->
    <rect x="200" y="160" width="120" height="200" rx="5" fill="#e8f5e9" fill-opacity="0.5" stroke="#388e3c" stroke-width="1" />
    <text x="260" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#388e3c" text-anchor="middle">
    Feature Engineering
    </text>
    <text x="260" y="205" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Per-90 normalization
    </text>
    <text x="260" y="225" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Composite indices
    </text>
    <text x="260" y="245" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    (PI, CCI, DA, FE)
    </text>
    <text x="260" y="265" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Winsorization
    </text>
    <text x="260" y="285" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Standardization
    </text>

    <!-- Dimensionality Reduction -->
    <rect x="350" y="160" width="120" height="200" rx="5" fill="#fff3e0" fill-opacity="0.5" stroke="#f57c00" stroke-width="1" />
    <text x="410" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00" text-anchor="middle">
    Dim. Reduction
    </text>
    <text x="410" y="205" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    PCA
    </text>
    <text x="410" y="225" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    3 components
    </text>
    <text x="410" y="245" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    90% variance
    </text>
    <text x="410" y="265" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    UMAP for
    </text>
    <text x="410" y="285" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    visualization
    </text>

    <!-- Clustering -->
    <rect x="500" y="160" width="120" height="200" rx="5" fill="#f3e5f5" fill-opacity="0.5" stroke="#7b1fa2" stroke-width="1" />
    <text x="560" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7b1fa2" text-anchor="middle">
    Clustering
    </text>
    <text x="560" y="205" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    K-Means
    </text>
    <text x="560" y="225" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle"> k=3
    </text>
    <text x="560" y="245" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Silhouette: 0.2455
    </text>
    <text x="560" y="265" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    ARI: 0.9143
    </text>
    <text x="560" y="285" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Role naming
    </text>

    <!-- Explainability -->
    <rect x="650" y="160" width="120" height="200" rx="5" fill="#ffebee" fill-opacity="0.5" stroke="#c62828" stroke-width="1" />
    <text x="710" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c62828" text-anchor="middle">
    Explainability
    </text>
    <text x="710" y="205" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    RandomForest
    </text>
    <text x="710" y="225" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    surrogate model
    </text>
    <text x="710" y="245" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    SHAP values
    </text>
    <text x="710" y="265" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    Permutation
    </text>
    <text x="710" y="285" font-family="Arial, sans-serif" font-size="11" fill="#333333" text-anchor="middle">
    importance
    </text>

    <!-- Output -->
    <rect x="350" y="370" width="120" height="20" rx="5" fill="#37003c" stroke="#37003c" stroke-width="1" />
    <text x="410" y="385" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">
    Streamlit App
    </text>
</svg>
